#pragma checksum "C:\Games\Games\Pages\Yahtzee.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3e25d1303ff051c7645a8319ce164405fd6f8473"
// <auto-generated/>
#pragma warning disable 1591
namespace Games.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Games\Games\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Games\Games\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Games\Games\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Games\Games\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Games\Games\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Games\Games\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Games\Games\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Games\Games\_Imports.razor"
using Games;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Games\Games\_Imports.razor"
using Games.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Games\Games\Pages\Yahtzee.razor"
using Games.Models.Yahtzee;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Games\Games\Pages\Yahtzee.razor"
using Games.Models.Yahtzee.Enums;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Games\Games\Pages\Yahtzee.razor"
using Games.Models.Common;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Games\Games\Pages\Yahtzee.razor"
using Games.Pages.Partials;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/yahtzee")]
    public partial class Yahtzee : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Games.Shared.PageTitle>(0);
            __builder.AddAttribute(1, "Title", "Yahtzee");
            __builder.CloseComponent();
            __builder.AddMarkupContent(2, "\n\n\n");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "container");
            __builder.AddMarkupContent(5, "\n    ");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "row");
            __builder.AddMarkupContent(8, "\n        ");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "col-2");
            __builder.AddMarkupContent(11, "\n");
#nullable restore
#line 220 "C:\Games\Games\Pages\Yahtzee.razor"
             for (int i = 0; i < Dice.Dice.Count; i++)
            {
                var x = i;
                var die = Dice.Dice[x];

#line default
#line hidden
#nullable disable
            __builder.AddContent(12, "                ");
            __builder.OpenComponent<Games.Pages.Partials.YahtzeeDie>(13);
            __builder.AddAttribute(14, "Die", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Games.Models.Yahtzee.Die>(
#nullable restore
#line 224 "C:\Games\Games\Pages\Yahtzee.razor"
                                 die

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(15, "IsStartOfTurn", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Boolean>(
#nullable restore
#line 224 "C:\Games\Games\Pages\Yahtzee.razor"
                                                     IsStartOfTurn

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(16, "\n");
#nullable restore
#line 225 "C:\Games\Games\Pages\Yahtzee.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(17, "            ");
            __builder.OpenElement(18, "div");
            __builder.AddAttribute(19, "class", "row");
            __builder.AddMarkupContent(20, "\n                ");
            __builder.OpenElement(21, "div");
            __builder.AddAttribute(22, "class", "col");
            __builder.AddMarkupContent(23, "\n");
#nullable restore
#line 228 "C:\Games\Games\Pages\Yahtzee.razor"
                     if (RollsRemaining > 0 && !IsGameOver)
                    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(24, "                        ");
            __builder.OpenElement(25, "button");
            __builder.AddAttribute(26, "class", "btn btn-primary");
            __builder.AddEventPreventDefaultAttribute(27, "onclick", true);
            __builder.AddAttribute(28, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 230 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                                            () => RollDice()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(29, "Roll");
            __builder.CloseElement();
            __builder.AddMarkupContent(30, "\n");
#nullable restore
#line 231 "C:\Games\Games\Pages\Yahtzee.razor"
                    }
                    else if (IsGameOver)
                    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(31, "                        ");
            __builder.OpenElement(32, "button");
            __builder.AddAttribute(33, "class", "btn btn-success");
            __builder.AddAttribute(34, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 234 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                    () => Initialize()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(35, "Reset");
            __builder.CloseElement();
            __builder.AddMarkupContent(36, "\n");
            __builder.AddMarkupContent(37, "Thanks for playing!<br>Final score: ");
            __builder.AddContent(38, 
#nullable restore
#line 235 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                     TotalScore

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(39, " <br>Rank: ");
            __builder.AddContent(40, 
#nullable restore
#line 235 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                                             GetRank()

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 235 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                                                             
                    }
                    else
                    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(41, "                        ");
            __builder.OpenElement(42, "button");
            __builder.AddAttribute(43, "class", "btn btn-primary disabled");
            __builder.AddEventPreventDefaultAttribute(44, "onclick", true);
            __builder.AddAttribute(45, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 239 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                                                     () => RollDice()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(46, "Roll");
            __builder.CloseElement();
            __builder.AddContent(47, "Please mark a score.");
#nullable restore
#line 239 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                                                                                                                      
                    }

#line default
#line hidden
#nullable disable
            __builder.AddContent(48, "                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(49, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(50, "\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(51, "\n        ");
            __builder.OpenElement(52, "div");
            __builder.AddAttribute(53, "class", "col-8");
            __builder.AddMarkupContent(54, "\n            ");
            __builder.AddMarkupContent(55, "<div class=\"row\">\n                <div class=\"col\">\n                    <h4>Scorecard</h4>\n                </div>\n            </div>\n            ");
            __builder.OpenElement(56, "div");
            __builder.AddAttribute(57, "class", "row");
            __builder.AddMarkupContent(58, "\n                ");
            __builder.OpenElement(59, "div");
            __builder.AddAttribute(60, "class", "col-4");
            __builder.AddMarkupContent(61, "\n                    Rolls Remaining This Turn: ");
            __builder.AddContent(62, 
#nullable restore
#line 252 "C:\Games\Games\Pages\Yahtzee.razor"
                                                RollsRemaining

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(63, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\n                ");
            __builder.OpenElement(65, "div");
            __builder.AddAttribute(66, "class", "col-4");
            __builder.AddMarkupContent(67, "\n                    Turns Remaining: ");
            __builder.AddContent(68, 
#nullable restore
#line 255 "C:\Games\Games\Pages\Yahtzee.razor"
                                      TurnsRemaining

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(69, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(70, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(71, "\n            \n");
#nullable restore
#line 259 "C:\Games\Games\Pages\Yahtzee.razor"
             foreach (PlayType type in (PlayType[])Enum.GetValues(typeof(PlayType)))
            {
                

#line default
#line hidden
#nullable disable
#nullable restore
#line 261 "C:\Games\Games\Pages\Yahtzee.razor"
                 if (type != PlayType.BonusYahtzee || (type == PlayType.BonusYahtzee && PlaysMade.HasYahtzee()))
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(72, "                    ");
            __builder.OpenElement(73, "div");
            __builder.AddAttribute(74, "class", "row" + " " + (
#nullable restore
#line 263 "C:\Games\Games\Pages\Yahtzee.razor"
                                      type == PlayType.BonusYahtzee ? "bg-warning" : ""

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(75, "\n                        ");
            __builder.OpenElement(76, "div");
            __builder.AddAttribute(77, "class", "col-6 border border-dark font-weight-bold");
            __builder.AddMarkupContent(78, "\n                            ");
            __builder.AddContent(79, 
#nullable restore
#line 265 "C:\Games\Games\Pages\Yahtzee.razor"
                             type.GetDisplayName()

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(80, "\n                            ");
            __builder.OpenElement(81, "i");
            __builder.AddAttribute(82, "class", "fa fa-question-circle");
            __builder.AddAttribute(83, "title", 
#nullable restore
#line 266 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                     type.GetDisplayDescription()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(84, "\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(85, "\n                        ");
            __builder.OpenElement(86, "div");
            __builder.AddAttribute(87, "class", "col-6 border border-dark p-1 min");
            __builder.AddMarkupContent(88, "\n");
#nullable restore
#line 269 "C:\Games\Games\Pages\Yahtzee.razor"
                             if (PlaysMade.HasPlay(type))
                            {
                                

#line default
#line hidden
#nullable disable
            __builder.AddContent(89, 
#nullable restore
#line 271 "C:\Games\Games\Pages\Yahtzee.razor"
                                 PlaysMade.GetScore(type)

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 271 "C:\Games\Games\Pages\Yahtzee.razor"
                                                         
                            }
                            else if (CanMakePlay(type) && !IsStartOfTurn)
                            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(90, "                                ");
            __builder.OpenElement(91, "a");
            __builder.AddAttribute(92, "class", "btn btn-primary btn-sm");
            __builder.AddAttribute(93, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 275 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                              () => ClaimPlay(type)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(94, "Claim");
            __builder.CloseElement();
            __builder.AddMarkupContent(95, "\n");
#nullable restore
#line 276 "C:\Games\Games\Pages\Yahtzee.razor"
                            }
                            else if (RollsRemaining == 0)
                            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(96, "                                ");
            __builder.OpenElement(97, "a");
            __builder.AddAttribute(98, "class", "btn btn-outline-secondary btn-sm");
            __builder.AddAttribute(99, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 279 "C:\Games\Games\Pages\Yahtzee.razor"
                                                                                        () => ScratchPlay(type)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(100, "Scratch");
            __builder.CloseElement();
            __builder.AddMarkupContent(101, "\n");
#nullable restore
#line 280 "C:\Games\Games\Pages\Yahtzee.razor"
                            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(102, "                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(103, "\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(104, "\n");
#nullable restore
#line 283 "C:\Games\Games\Pages\Yahtzee.razor"
                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 283 "C:\Games\Games\Pages\Yahtzee.razor"
                 
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(105, "            ");
            __builder.OpenElement(106, "div");
            __builder.AddAttribute(107, "class", "row");
            __builder.AddMarkupContent(108, "\n                ");
            __builder.AddMarkupContent(109, "<div class=\"col-6 border border-dark font-weight-bold\">TOP SECTION BONUS <i class=\"fa fa-question-circle\" title=\"If your scores for ones, twos, threes, fours, fives, and sixes total 63 or more, you get a 35 point bonus!\"></i></div>\n                ");
            __builder.OpenElement(110, "div");
            __builder.AddAttribute(111, "class", "col-6 border border-dark p-1");
            __builder.AddMarkupContent(112, "\n");
#nullable restore
#line 288 "C:\Games\Games\Pages\Yahtzee.razor"
                     if (PlaysMade.HasBonus())
                    {
                        

#line default
#line hidden
#nullable disable
            __builder.AddContent(113, "35");
#nullable restore
#line 290 "C:\Games\Games\Pages\Yahtzee.razor"
                                       
                    }
                    else
                    {
                        

#line default
#line hidden
#nullable disable
            __builder.AddContent(114, "0");
#nullable restore
#line 294 "C:\Games\Games\Pages\Yahtzee.razor"
                                      
                    }

#line default
#line hidden
#nullable disable
            __builder.AddContent(115, "                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(116, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(117, "\n            ");
            __builder.OpenElement(118, "div");
            __builder.AddAttribute(119, "class", "row");
            __builder.AddMarkupContent(120, "\n                ");
            __builder.AddMarkupContent(121, "<div class=\"col-6 border border-dark font-weight-bold\">GRAND TOTAL</div>\n                ");
            __builder.OpenElement(122, "div");
            __builder.AddAttribute(123, "class", "col-6 border border-dark p-1");
            __builder.AddMarkupContent(124, "\n                    ");
            __builder.AddContent(125, 
#nullable restore
#line 301 "C:\Games\Games\Pages\Yahtzee.razor"
                     TotalScore

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(126, "\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(127, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(128, "\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(129, "\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(130, "\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(131, "\n\n");
            __builder.OpenComponent<Games.Pages.Partials.YahtzeeRules>(132);
            __builder.CloseComponent();
            __builder.AddMarkupContent(133, "\n\n<hr>");
        }
        #pragma warning restore 1998
#nullable restore
#line 10 "C:\Games\Games\Pages\Yahtzee.razor"
       
    public DieCollection Dice { get; set; } = new DieCollection();

    public PlayCollection PlaysMade { get; set; } = new PlayCollection();

    public int TurnsRemaining { get; set; } = 13;

    public int RollsRemaining { get; set; } = 3;

    public bool IsStartOfTurn { get { return RollsRemaining >= 3; } }

    public bool IsGameOver { get { return TurnsRemaining <= 0; } }

    public bool ShowRules { get; set; }

    public int TotalScore
    {
        get
        {
            if (PlaysMade.HasBonus())
            {
                return PlaysMade.GetTotal() + 35;
            }
            return PlaysMade.GetTotal();
        }
    }

    public Yahtzee()
    {
        Initialize();
    }

    public void Initialize()
    {
        Dice.Reset();

        PlaysMade.Reset();
        TurnsRemaining = 13;
        RollsRemaining = 3;
    }

    public async Task RollDice()
    {
        Random rand = new Random();

        var unheldDice = Dice.Dice.Where(x => x.IsHeld == false);

        foreach (var die in unheldDice)
        {
            die.State = DieState.Rolling;
        }

        foreach (var die in unheldDice)
        {
            await Task.Delay(200);
            die.State = DieState.Stopped;
            die.Value = rand.Next(1, 7);
            StateHasChanged();
        }
        RollsRemaining--;
    }

    public void NextTurn()
    {
        RollsRemaining = 3;
        TurnsRemaining--;
        Dice.ReleaseHold();
    }

    public bool CanMakePlay(PlayType type)
    {
        switch (type)
        {
            case PlayType.Ones:
                return Dice.HasThreeOnes();

            case PlayType.Twos:
                return Dice.HasThreeTwos();

            case PlayType.Threes:
                return Dice.HasThreeThrees();

            case PlayType.Fours:
                return Dice.HasThreeFours();

            case PlayType.Fives:
                return Dice.HasThreeFives();

            case PlayType.Sixes:
                return Dice.HasThreeSixes();

            case PlayType.Yahtzee:
            case PlayType.BonusYahtzee:
                return Dice.HasYahtzee();

            case PlayType.ThreeOfAKind:
                return Dice.HasThreeOfAKind();

            case PlayType.FourOfAKind:
                return Dice.HasFourOfAKind();

            case PlayType.FullHouse:
                return Dice.HasFullHouse();

            case PlayType.SmallStraight:
                return Dice.HasSmallStraight();

            case PlayType.LargeStraight:
                return Dice.HasLargeStraight();

            case PlayType.Chance:
                return true;

            default: return false;
        }
    }

    public void ClaimPlay(PlayType type)
    {
        switch (type)
        {
            case PlayType.Ones:
                PlaysMade.Add(type, Dice.GetSumOf(1));
                break;

            case PlayType.Twos:
                PlaysMade.Add(type, Dice.GetSumOf(2));
                break;

            case PlayType.Threes:
                PlaysMade.Add(type, Dice.GetSumOf(3));
                break;

            case PlayType.Fours:
                PlaysMade.Add(type, Dice.GetSumOf(4));
                break;

            case PlayType.Fives:
                PlaysMade.Add(type, Dice.GetSumOf(5));
                break;

            case PlayType.Sixes:
                PlaysMade.Add(type, Dice.GetSumOf(6));
                break;

            case PlayType.Yahtzee:
                PlaysMade.Add(type, 50);
                break;

            case PlayType.BonusYahtzee:
                PlaysMade.Add(type, 100);
                break;

            case PlayType.ThreeOfAKind:
                PlaysMade.Add(type, Dice.GetOfAKindTotal(3));
                break;

            case PlayType.FourOfAKind:
                PlaysMade.Add(type, Dice.GetOfAKindTotal(4));
                break;

            case PlayType.FullHouse:
                PlaysMade.Add(type, 25);
                break;

            case PlayType.SmallStraight:
                PlaysMade.Add(type, 30);
                break;

            case PlayType.LargeStraight:
                PlaysMade.Add(type, 40);
                break;

            case PlayType.Chance:
                PlaysMade.Add(type, Dice.Dice.Sum(x => x.Value));
                break;
        }

        NextTurn();
    }

    public void ScratchPlay(PlayType type)
    {
        PlaysMade.Add(type, 0);
        NextTurn();
    }

    public string GetRank()
    {
        if (!IsGameOver) return "Finish the game first!";

        if (TotalScore <= 112) return "D";

        if (TotalScore > 112 && TotalScore <= 168) return "C";

        if (TotalScore > 168 && TotalScore <= 224) return "B";

        if (TotalScore > 224 && TotalScore <= 280) return "A";

        if (TotalScore > 280 && TotalScore <= 364) return "S";

        if (TotalScore > 364) return "S+";

        return "";
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
