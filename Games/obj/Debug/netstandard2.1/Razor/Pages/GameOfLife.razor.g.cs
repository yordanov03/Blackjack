#pragma checksum "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "807da635f1ccd982e1dac273bac9fd6bc56b93fd"
// <auto-generated/>
#pragma warning disable 1591
namespace Games.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Blackjack\BlazorGames\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Blackjack\BlazorGames\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Blackjack\BlazorGames\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Blackjack\BlazorGames\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Blackjack\BlazorGames\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Blackjack\BlazorGames\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Blackjack\BlazorGames\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Blackjack\BlazorGames\_Imports.razor"
using Games;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Blackjack\BlazorGames\_Imports.razor"
using Games.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
using Games.Models.GameOfLife;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
using Games.Models.GameOfLife.Enums;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
using Games.Models.Common;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
using Games.Pages.Partials;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
using System.Security.Cryptography;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/gameoflife")]
    public partial class GameOfLife : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenComponent<Games.Shared.PageTitle>(0);
            __builder.AddAttribute(1, "Title", "Conway\'s Game of Life");
            __builder.CloseComponent();
            __builder.AddMarkupContent(2, "\n");
            __builder.AddMarkupContent(3, "<p class=\"font-italic\">\n    Special thanks to <a href=\"https://khalidabuhakmeh.com/program-the-game-of-life-with-csharp-and-emojis\">Khalid Abuhakmeh</a> for the idea.\n</p>\n\n");
            __builder.OpenElement(4, "div");
            __builder.AddAttribute(5, "class", "container");
            __builder.AddMarkupContent(6, "\n    ");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "row");
            __builder.AddMarkupContent(9, "\n        ");
            __builder.OpenElement(10, "div");
            __builder.AddAttribute(11, "class", "col-4");
            __builder.AddMarkupContent(12, "\n            ");
            __builder.AddMarkupContent(13, "<label>Theme: </label>\n            ");
            __builder.OpenElement(14, "select");
            __builder.AddAttribute(15, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 128 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                SetTheme

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(16, "\n                ");
            __builder.OpenElement(17, "option");
            __builder.AddAttribute(18, "value", 
#nullable restore
#line 129 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                Theme.Faces

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(19, 
#nullable restore
#line 129 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                              Theme.Faces.GetDisplayDescription()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\n                ");
            __builder.OpenElement(21, "option");
            __builder.AddAttribute(22, "value", 
#nullable restore
#line 130 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                Theme.Cats

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(23, 
#nullable restore
#line 130 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                             Theme.Cats.GetDisplayDescription()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(24, "\n                ");
            __builder.OpenElement(25, "option");
            __builder.AddAttribute(26, "value", 
#nullable restore
#line 131 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                Theme.Aliens

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(27, 
#nullable restore
#line 131 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                               Theme.Aliens.GetDisplayDescription()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\n                ");
            __builder.OpenElement(29, "option");
            __builder.AddAttribute(30, "value", 
#nullable restore
#line 132 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                Theme.Boxes

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(31, 
#nullable restore
#line 132 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                              Theme.Boxes.GetDisplayDescription()

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(32, "\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(33, "\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "\n        ");
            __builder.OpenElement(35, "div");
            __builder.AddAttribute(36, "class", "col-2");
            __builder.AddMarkupContent(37, "\n");
#nullable restore
#line 136 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
             if (RunSimulation)
            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(38, "                ");
            __builder.AddMarkupContent(39, "<button class=\"btn btn-primary\" disabled>Randomize</button>\n");
#nullable restore
#line 139 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
            }
            else
            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(40, "                ");
            __builder.OpenElement(41, "button");
            __builder.AddAttribute(42, "class", "btn btn-primary");
            __builder.AddAttribute(43, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 142 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                                          (() => Randomize())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(44, "Randomize");
            __builder.CloseElement();
            __builder.AddMarkupContent(45, "\n");
#nullable restore
#line 143 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(46, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(47, "\n        ");
            __builder.OpenElement(48, "div");
            __builder.AddAttribute(49, "class", "col-2");
            __builder.AddMarkupContent(50, "\n");
#nullable restore
#line 146 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
             if (RunSimulation)
            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(51, "                ");
            __builder.OpenElement(52, "button");
            __builder.AddAttribute(53, "class", "btn btn-secondary");
            __builder.AddAttribute(54, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 148 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                                            (() => Stop())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(55, "<i class=\"fa fa-stop\"></i> Stop");
            __builder.CloseElement();
            __builder.AddMarkupContent(56, "\n");
#nullable restore
#line 149 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
            }
            else
            {

#line default
#line hidden
#nullable disable
            __builder.AddContent(57, "                ");
            __builder.OpenElement(58, "button");
            __builder.AddAttribute(59, "class", "btn btn-primary");
            __builder.AddAttribute(60, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 152 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                                          (async () => await Run())

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(61, "<i class=\"fa fa-play\"></i> Run");
            __builder.CloseElement();
            __builder.AddMarkupContent(62, "\n");
#nullable restore
#line 153 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(63, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(65, "\n");
#nullable restore
#line 156 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
     for (int i = 1; i < Rows; i++)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(66, "        ");
            __builder.OpenElement(67, "div");
            __builder.AddAttribute(68, "class", "row flex-nowrap gameoflife-container");
            __builder.AddMarkupContent(69, "\n");
#nullable restore
#line 159 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
             for (int j = 1; j < Columns; j++)
            {
                var x = i;
                var y = j;
                var cell = Grid[x, y];

                if (cell == Status.Alive)
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(70, "                    ");
            __builder.OpenElement(71, "div");
            __builder.AddAttribute(72, "class", "gameoflife-alivecell-" + (
#nullable restore
#line 167 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                                      Theme.GetDisplayName()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(73, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 168 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                   (() => ChangeStatus(x,y))

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(74, "\n");
#nullable restore
#line 169 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                }
                else
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(75, "                    ");
            __builder.OpenElement(76, "div");
            __builder.AddAttribute(77, "class", "gameoflife-cell" + " gameoflife-deadcell-" + (
#nullable restore
#line 172 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                                                     Theme.GetDisplayName()

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(78, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 173 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                                   (() => ChangeStatus(x,y))

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(79, "\n");
#nullable restore
#line 174 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
                }
            }

#line default
#line hidden
#nullable disable
            __builder.AddContent(80, "        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(81, "\n");
#nullable restore
#line 177 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(82, "\n\n<hr>\n");
            __builder.OpenComponent<Games.Pages.Partials.GameOfLifeRules>(83);
            __builder.CloseComponent();
            __builder.AddMarkupContent(84, "\n\n<hr>");
        }
        #pragma warning restore 1998
#nullable restore
#line 9 "C:\Blackjack\BlazorGames\Pages\GameOfLife.razor"
       
    public int Rows { get; set; }
    public int Columns { get; set; }
    public bool RunSimulation { get; set; }
    public Theme Theme { get; set; }

    public Status[,] Grid { get; set; }

    public GameOfLife()
    {
        Rows = 20;
        Columns = 20;
        Grid = new Status[Rows, Columns];
    }

    public async Task Run()
    {
        RunSimulation = true;
        while (RunSimulation)
        {
            CalculateNextGeneration();
            StateHasChanged();
            await Task.Delay(1000);
        }
    }

    public void Stop()
    {
        RunSimulation = false;
    }

    public void SetTheme(ChangeEventArgs e)
    {
        Theme = (Theme)Enum.Parse(typeof(Theme), e.Value.ToString());
    }

    public void ChangeStatus(int row, int column)
    {
        Grid[row, column] = Grid[row, column] == Status.Dead ? Status.Alive : Status.Dead;
    }

    public void Randomize()
    {
        for (var row = 0; row < Rows; row++)
        {
            for (var column = 0; column < Columns; column++)
            {
                Grid[row, column] = (Status)RandomNumberGenerator.GetInt32(0, 2);
            }
        }
    }

    //Code for this method originally by Khalid Abuhakmeh.
    //https://khalidabuhakmeh.com/program-the-game-of-life-with-csharp-and-emojis
    public void CalculateNextGeneration()
    {
        var nextGeneration = new Status[Rows, Columns];

        // Loop through every cell 
        for (var row = 1; row < Rows - 1; row++)
        {
            for (var column = 1; column < Columns - 1; column++)
            {
                // find your alive neighbors
                var aliveNeighbors = 0;
                for (var i = -1; i <= 1; i++)
                {
                    for (var j = -1; j <= 1; j++)
                    {
                        aliveNeighbors += Grid[row + i, column + j] == Status.Alive ? 1 : 0;
                    }
                }

                var currentCell = Grid[row, column];

                // The cell needs to be subtracted 
                // from its neighbors as it was  
                // counted before 
                aliveNeighbors -= currentCell == Status.Alive ? 1 : 0;

                // Implementing the Rules of Life 

                // Cell is lonely and dies 
                if (currentCell == Status.Alive && aliveNeighbors < 2)
                {
                    nextGeneration[row, column] = Status.Dead;
                }

                // Cell dies due to over population 
                else if (currentCell == Status.Alive && aliveNeighbors > 3)
                {
                    nextGeneration[row, column] = Status.Dead;
                }

                // A new cell is born 
                else if (currentCell == Status.Dead && aliveNeighbors == 3)
                {
                    nextGeneration[row, column] = Status.Alive;
                }
                // All other cells stay the same
                else
                {
                    nextGeneration[row, column] = currentCell;
                }
            }
        }
        Grid = nextGeneration;
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
